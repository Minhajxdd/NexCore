<%- include('../../partials/admin/head'); -%>

<!-- Cropper js -->
<link href="https://unpkg.com/cropperjs/dist/cropper.min.css" rel="stylesheet"/>

<%- include('../../partials/admin/nav'); -%>

    <!-- partial -->
    <div class="main-panel">
        <div class="content-wrapper">
          <div class="row">
            <div class="col-12 grid-margin stretch-card">
              <div class="card corona-gradient-card">
                <div class="card-body py-0 px-0 px-sm-3 title-div">
                  <div class="row align-items-center ">
                    <div class="col-4 col-sm-3 col-xl-2">
                      <img src="/admin_template/assets/images/dashboard/Group126@2x1.png" class="gradient-corona-img img-fluid" alt="">
                    </div>
                    <div class="col-5 col-sm-7 col-xl-8 p-0 title">
                      <h2 class="mb-1 mb-sm-0">Product Dashboard</h2>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
    </div>

    <!-- User List -->

    
    <div class="content-wrapper">
      <div class="row ">
        <div class="col-12 grid-margin">
          <div class="card">
            <div class="card-body">
              <div id="card-title">
                <h4 class="card-title">Users</h4>
                <button class="btn btn-success" id="add-usr-btn">+ New Product </button>
              </div>
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th> NO:</th>
                      <th>Produce Image</th>
                      <th> Product Name </th>
                      <th> Description </th>
                      <th> Price </th>
                      <th> Stock </th>
                      <th> Action </th>
                    </tr>
                  </thead>
                  <tbody>
                    <% products.forEach((val, ind) =>{ %>
                      <tr>
                        <td><%= ind + 1 %></td>
                        <td><img class="prod-img" src="/uploads/products/<%= val.images[0] %>" alt="product_image"></td>
                        <td id="tb-description2"><%= val.name %></td>
                        <td id="tb-description1"><%= val.description %></td>
                        <td>
                          <h6>Original Price: </h6>
                          <p><%= val.original_price %></p>
                          <h6>Discounted Price: </h6>
                          <p><%= val.discounted_price %></p>  
                        </td>
                        <td> <%= val.stock %> </td>
                        <td>
                          <button class="badge" data-id="<%= val._id%>" id="btn-action">Delete</button>
                          <button class="badge" data-id="<%= val._id%>" id="btn-edit">Edit</button>
                        </td>
                      </tr>
                    <% }) %>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>  
  

      <!-- add product form -->
      <div class="col-12 grid-margin stretch-card form-table-edit" id="add-products-table">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Add User</h4>
            <!-- Add a wrapper with a fixed height and overflow -->
            <div class="form-scroll-container">
              <form id="product-add-form"> 
                <div class="form-group">
                  <label for="product-name-add">Product Name</label>
                  <input type="text" class="form-control" id="product-name-add" placeholder="Product Name" name="name" required>
                </div>
                <div class="form-group">
                  <label for="description-form-add">Description</label>
                  <textarea class="form-control" id="description-form-add" placeholder="Description..." name="description" ></textarea>
                </div>
                <div class="form-group">
                  <label for="add-usr-category">Category</label>
                  <select class="selectpicker form-control" id="add-usr-category" data-style="btn-info" name="category">
                    <optgroup label="Select Category">

                      <% categories.forEach(val => { %>
                        <option data-id="<%= val._id%>" ><%= val.name %></option>
                      <% }) %>
                    
                    </optgroup>
                  </select>
                </div>
                <div class="form-group">
                  <label for="add-size-field">Size</label>
                  <div class="row">
                    <div class="col-md-6">
                      <input type="text" class="form-control" placeholder="Size Field Name" name="size">
                    </div>
                    <div class="col-md-6">
                      <input type="text" class="form-control" placeholder="Opton's Comma Separated" name="size_values">
                    </div>
                  </div>
                </div>


                 <div class="form-group">
                      <label for="imageInput1">Image 1</label>
                      <input name="image" type="file" class="form-control" id="imageInput1" accept="image/*" required>
                      <button type="button" class="btn btn-primary mt-2 cropButton">Crop</button>
                  </div> 
                  <div class="form-group">
                      <label for="imageInput2">Image 2</label>
                      <input name="image" type="file" class="form-control" id="imageInput2" accept="image/*" required>
                      <button type="button" class="btn btn-primary mt-2 cropButton">Crop</button>
                  </div>
                  <div class="form-group">
                      <label for="imageInput3">Image 3</label>
                      <input name="image" type="file" class="form-control" id="imageInput3" accept="image/*" required>
                      <button type="button" class="btn btn-primary mt-2 cropButton">Crop</button>
                  </div> 
                  <div class="" id="add-image-form-new-content-div"></div>
              <!-- Button to add more image upload fields -->
              <button type="button" id="addImageButton" class="btn btn-success my-2">+ Add Another Image</button>
                  
              <div id="cropContainer">
                <img id="imagePreview">
                <div id="cropButtons">
                    <button type="button" class="btn btn-primary" id="cropAndSaveButton">Crop and Save</button>
                    <button type="button" class="btn btn-danger" id="cancelCropButton">Cancel</button>
                </div>
             </div>
    
            <!-- Overlay for the Pop-Up -->
            <div class="overlay" id="overlay"></div>  


            <div class="form-group">
              <label>Price</label>
              <div class="row">
                <div class="col-md-6">
                  <input type="number" class="form-control" placeholder="Original Price" name="og_price">
                </div>
                <div class="col-md-6">
                  <input type="number" class="form-control" placeholder="Discounted Price" name="ds_price">
                </div>
              </div>
            </div>

            <div class="form-group">
              <div class="row">
                <div class="col-md-6">
                  <label for="add-product-stock">Stock</label>
                  <input type="number" id="add-product-stock" class="form-control" name="stock">
                </div>
              </div>
            </div>
                
                <button type="submit" class="btn btn-primary me-2">Submit</button>
                <div class="btn btn-dark" id="add-prd-cancel">Cancel</div>
              </form>
            </div>
            <!-- End of wrapper -->
          </div>
        </div>
      </div>
        <!-- add product form -->


       <!-- edit product form -->
       <div class="col-12 grid-margin stretch-card form-table-edit" id="edit-products-table">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Add User</h4>
            <!-- Add a wrapper with a fixed height and overflow -->
            <div class="form-scroll-container">
              <form id="product-edit-form"> 
                <div class="form-group">
                  <label for="product-name-edit">Product Name</label>
                  <input type="text" class="form-control" id="product-name-edit" placeholder="Product Name" name="name" required>
                </div>
                <div class="form-group">
                  <label for="description-form-edit">Description</label>
                  <textarea class="form-control" id="description-form-edit" placeholder="Description..." name="description" ></textarea>
                </div>
                <div class="form-group">
                  <label for="edit-usr-category">Category</label>
                  <select class="selectpicker form-control" id="edit-usr-category" data-style="btn-info" name="category">
                    <optgroup label="Select Category">

                      <% categories.forEach(val => { %>
                        <option data-id="<%= val._id%>" ><%= val.name %></option>
                      <% }) %>
                    
                    </optgroup>
                  </select>
                </div>
                <div class="form-group">
                  <label for="add-size-field">Size</label>
                  <div class="row">
                    <div class="col-md-6">
                      <input type="text" class="form-control" placeholder="Size Field Name" name="size">
                    </div>
                    <div class="col-md-6">
                      <input type="text" class="form-control" placeholder="Opton's Comma Separated" name="size_values">
                    </div>
                  </div>
                </div>


                 <div class="form-group">
                      <label for="editimageInput1">Image 1</label>
                      <input name="image" type="file" class="form-control" id="editimageInput1" accept="image/*" required>
                      <button type="button" class="btn btn-primary mt-2 cropButton">Crop</button>
                  </div> 
                  <div class="form-group">
                      <label for="editimageInput2">Image 2</label>
                      <input name="image" type="file" class="form-control" id="editimageInput2" accept="image/*" required>
                      <button type="button" class="btn btn-primary mt-2 cropButton">Crop</button>
                  </div>
                  <div class="form-group">
                      <label for="editimageInput3">Image 3</label>
                      <input name="image" type="file" class="form-control" id="editimageInput3" accept="image/*" required>
                      <button type="button" class="btn btn-primary mt-2 cropButton">Crop</button>
                  </div> 
                  <div class="" id="edit-image-form-new-content-div"></div>
              <!-- Button to add more image upload fields -->
              <button type="button" id="editImageButton" class="btn btn-success my-2">+ Add Another Image</button>
                  
              <div id="editcropContainer">
                <img id="editimagePreview">
                <div id="editcropButtons">
                    <button type="button" class="btn btn-primary" id="editcropAndSaveButton">Crop and Save</button>
                    <button type="button" class="btn btn-danger" id="editcancelCropButton">Cancel</button>
                </div>
             </div>
    
            <!-- Overlay for the Pop-Up -->
            <div class="overlay" id="editoverlay"></div>  


            <div class="form-group">
              <label>Price</label>
              <div class="row">
                <div class="col-md-6">
                  <input type="number" class="form-control" placeholder="Original Price" name="og_price">
                </div>
                <div class="col-md-6">
                  <input type="number" class="form-control" placeholder="Discounted Price" name="ds_price">
                </div>
              </div>
            </div>

            <div class="form-group">
              <div class="row">
                <div class="col-md-6">
                  <label for="add-product-stock">Stock</label>
                  <input type="number" id="edit-product-stock" class="form-control" name="stock">
                </div>
              </div>
            </div>
                
                <button type="submit" class="btn btn-primary me-2">Submit</button>
                <div class="btn btn-dark" id="edit-prd-cancel">Cancel</div>
              </form>
            </div>
            <!-- End of wrapper -->
          </div>
        </div>
      </div>
        <!-- edit product form -->





  </div> 

</div> 


<!-- Cdns -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.4/axios.min.js" defer></script>

<script src="https://unpkg.com/cropperjs/dist/cropper.min.js"></script>
<!-- Custom Js -->
<script src="/admin_template/assets/js/custom/productAdmin.js"></script>


<%- include('../../partials/admin/body'); -%>

